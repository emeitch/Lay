!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:e.maquette={})}(this,function(e){"use strict";var t,r,o="http://www.w3.org/",n=o+"2000/svg",i=o+"1999/xlink",s=[],d=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r},a=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},p=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},c=function(e,t,r){for(var o=0,n=t.length;o<n;o++){var i=t[o];Array.isArray(i)?c(e,i,r):null!==i&&void 0!==i&&(i.hasOwnProperty("vnodeSelector")||(i=p(i)),r.push(i))}},u=function(){throw new Error("Provide a transitions object to the projectionOptions to do animations")},f={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r},transitions:{enter:u,exit:u}},l=function(e){return d(f,e)},v=function(e){if("string"!=typeof e)throw new Error("Style values must be strings")},h=function(e,t,r){if(t)for(var o=r.eventHandlerInterceptor,s=Object.keys(t),d=s.length,a=0;a<d;a++){var p=s[a],c=t[p];if("className"===p)throw new Error('Property "className" is not supported, use "class".');if("class"===p)c.split(/\s+/).forEach(function(t){return e.classList.add(t)});else if("classes"===p)for(var u=Object.keys(c),f=u.length,l=0;l<f;l++){var h=u[l];c[h]&&e.classList.add(h)}else if("styles"===p)for(var m=Object.keys(c),y=m.length,l=0;l<y;l++){var g=m[l],N=c[g];N&&(v(N),r.styleApplyer(e,g,N))}else{if("key"===p)continue;if(null===c||void 0===c)continue;var b=typeof c;"function"===b?0===p.lastIndexOf("on",0)&&(o&&(c=o(p,c,e,t)),"oninput"===p&&!function(){var e=c;c=function(t){t.target["oninput-value"]=t.target.value,e.apply(this,[t])}}(),e[p]=c):"string"===b&&"value"!==p&&"innerHTML"!==p?r.namespace===n&&"href"===p?e.setAttributeNS(i,p,c):e.setAttribute(p,c):e[p]=c}}},m=function(e,t,r,o){if(r){for(var s=!1,d=Object.keys(r),a=d.length,p=0;p<a;p++){var c=d[p],u=r[c],f=t[c];if("class"===c){if(f!==u)throw new Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===c)for(var l=e.classList,h=Object.keys(u),m=h.length,y=0;y<m;y++){var g=h[y],N=!!u[g],b=!!f[g];N!==b&&(s=!0,N?l.add(g):l.remove(g))}else if("styles"===c)for(var w=Object.keys(u),x=w.length,y=0;y<x;y++){var S=w[y],A=u[S],k=f[S];A!==k&&(s=!0,A?(v(A),o.styleApplyer(e,S,A)):o.styleApplyer(e,S,""))}else if(u||"string"!=typeof f||(u=""),"value"===c)e[c]!==u&&e["oninput-value"]!==u&&(e[c]=u,e["oninput-value"]=void 0),u!==f&&(s=!0);else if(u!==f){var E=typeof u;if("function"===E)throw new Error("Functions may not be updated on subsequent renders (property: "+c+"). Hint: declare event handler functions outside the render() function.");"string"===E&&"innerHTML"!==c?o.namespace===n&&"href"===c?e.setAttributeNS(i,c,u):e.setAttribute(c,u):e[c]!==u&&(e[c]=u),s=!0}}return s}},y=function(e,t,r){if(""!==t.vnodeSelector)for(var o=r;o<e.length;o++)if(a(e[o],t))return o;return-1},g=function(e,t){if(e.properties){var r=e.properties.enterAnimation;r&&("function"==typeof r?r(e.domNode,e.properties):t.enter(e.domNode,e.properties,r))}},N=function(e,t){var r=e.domNode;if(e.properties){var o=e.properties.exitAnimation;if(o){r.style.pointerEvents="none";var n=function(){r.parentNode&&r.parentNode.removeChild(r)};return"function"==typeof o?void o(r,n,e.properties):void t.exit(e.domNode,e.properties,o,n)}}r.parentNode&&r.parentNode.removeChild(r)},b=function(e,t,r,o){var n=e[t];if(""!==n.vnodeSelector){var i=n.properties,s=i?void 0===i.key?i.bind:i.key:void 0;if(!s)for(var d=0;d<e.length;d++)if(d!==t){var p=e[d];if(a(p,n))throw"added"===o?new Error(r.vnodeSelector+" had a "+n.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable."):new Error(r.vnodeSelector+" had a "+n.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},w=function(e,o,n,i,d){if(n===i)return!1;n=n||s,i=i||s;for(var p,c=n.length,u=i.length,f=d.transitions,l=0,v=0,h=!1;v<u;){var m=l<c?n[l]:void 0,w=i[v];if(void 0!==m&&a(m,w))h=r(m,w,d)||h,l++;else{var x=y(n,w,l+1);if(x>=0){for(p=l;p<x;p++)N(n[p],f),b(n,p,e,"removed");h=r(n[x],w,d)||h,l=x+1}else t(w,o,l<c?n[l].domNode:void 0,d),g(w,f),b(i,v,e,"added")}v++}if(c>l)for(p=l;p<c;p++)N(n[p],f),b(n,p,e,"removed");return h},x=function(e,r,o){if(r)for(var n=0;n<r.length;n++)t(r[n],e,void 0,o)},S=function(e,t,r){x(e,t.children,r),t.text&&(e.textContent=t.text),h(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])};t=function(e,t,r,o){var i,s,a,p,c,u=0,f=e.vnodeSelector;if(""===f)i=e.domNode=document.createTextNode(e.text),void 0!==r?t.insertBefore(i,r):t.appendChild(i);else{for(s=0;s<=f.length;++s)a=f.charAt(s),s!==f.length&&"."!==a&&"#"!==a||(p=f.charAt(u-1),c=f.slice(u,s),"."===p?i.classList.add(c):"#"===p?i.id=c:("svg"===c&&(o=d(o,{namespace:n})),void 0!==o.namespace?i=e.domNode=document.createElementNS(o.namespace,c):(i=e.domNode=document.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==r?t.insertBefore(i,r):t.appendChild(i)),u=s+1);S(i,e,o)}},r=function(e,t,r){var o=e.domNode,i=!1;if(e===t)return!1;var s=!1;if(""===t.vnodeSelector){if(t.text!==e.text){var a=document.createTextNode(t.text);return o.parentNode.replaceChild(a,o),t.domNode=a,i=!0}}else 0===t.vnodeSelector.lastIndexOf("svg",0)&&(r=d(r,{namespace:n})),e.text!==t.text&&(s=!0,void 0===t.text?o.removeChild(o.firstChild):o.textContent=t.text),s=w(t,o,e.children,t.children,r)||s,s=m(o,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[o,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(o,t.properties,e.properties),t.domNode=e.domNode,i};var A=function(e,t){return{update:function(o){if(e.vnodeSelector!==o.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");r(e,o,t),e=o},domNode:e.domNode}};e.h=function(e){var t=arguments[1];if("string"!=typeof e)throw new Error;var r=1;!t||t.hasOwnProperty("vnodeSelector")||Array.isArray(t)||"object"!=typeof t?t=void 0:r=2;var o=void 0,n=void 0,i=arguments.length;if(i===r+1){var s=arguments[r];"string"==typeof s?o=s:void 0!==s&&null!==s&&1===s.length&&"string"==typeof s[0]&&(o=s[0])}if(void 0===o)for(n=[];r<i;r++){var d=arguments[r];null!==d&&void 0!==d&&(Array.isArray(d)?c(e,d,n):d.hasOwnProperty("vnodeSelector")?n.push(d):n.push(p(d)))}return{vnodeSelector:e,properties:t,children:n,text:""===o?void 0:o,domNode:null}},e.dom={create:function(e,r){return r=l(r),t(e,document.createElement("div"),void 0,r),A(e,r)},append:function(e,r,o){return o=l(o),t(r,e,void 0,o),A(r,o)},insertBefore:function(e,r,o){return o=l(o),t(r,e.parentNode,e,o),A(r,o)},merge:function(e,t,r){return r=l(r),t.domNode=e,S(e,t,r),A(t,r)}},e.createCache=function(){var e=void 0,t=void 0,r={invalidate:function(){t=void 0,e=void 0},result:function(r,o){if(e)for(var n=0;n<r.length;n++)e[n]!==r[n]&&(t=void 0);return t||(t=o(),e=r),t}};return r},e.createMapping=function(e,t,r){var o=[],n=[];return{results:n,map:function(i){for(var s=i.map(e),d=n.slice(),a=0,p=0;p<i.length;p++){var c=i[p],u=s[p];if(u===o[a])n[p]=d[a],r(c,d[a],p),a++;else{for(var f=!1,l=1;l<o.length+1;l++){var v=(a+l)%o.length;if(o[v]===u){n[p]=d[v],r(i[p],d[v],p),a=v+1,f=!0;break}}f||(n[p]=t(c,p))}}n.length=i.length,o=s}}},e.createProjector=function(r){var o,n=l(r);n.eventHandlerInterceptor=function(e,t,r,n){return function(){return o.scheduleRender(),t.apply(n.bind||this,arguments)}};var i,s=!0,d=!1,a=[],p=[],c=function(){if(i=void 0,s){s=!1;for(var e=0;e<a.length;e++){var t=p[e]();a[e].update(t)}s=!0}};return o={renderNow:c,scheduleRender:function(){i||d||(i=requestAnimationFrame(c))},stop:function(){i&&(cancelAnimationFrame(i),i=void 0),d=!0},resume:function(){d=!1,s=!0,o.scheduleRender()},append:function(t,r){a.push(e.dom.append(t,r(),n)),p.push(r)},insertBefore:function(t,r){a.push(e.dom.insertBefore(t,r(),n)),p.push(r)},merge:function(t,r){a.push(e.dom.merge(t,r(),n)),p.push(r)},replace:function(e,r){var o=r();t(o,e.parentNode,e,n),e.parentNode.removeChild(e),a.push(A(o,n)),p.push(r)},detach:function(e){for(var t=0;t<p.length;t++)if(p[t]===e)return p.splice(t,1),a.splice(t,1)[0];throw new Error("renderMaquetteFunction was not found")}}}});
//# sourceMappingURL=maquette.min.js.map
